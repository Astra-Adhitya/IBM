<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MedAI - Healthcare AI Assistant</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'medai-primary': '#990808',
                        'medai-bg': '#fae8d2',
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-medai-bg min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-md">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <!-- Replace this with your MedAI brand logo -->
                    <div class="w-10 h-10 bg-medai-primary rounded-lg flex items-center justify-center">
                        <span class="text-white font-bold text-xl">M</span>
                    </div>
                    <h1 class="text-2xl font-bold text-medai-primary">MedAI</h1>
                </div>
                <div class="flex items-center gap-4" style="padding-right: 1rem;">
                    <button 
                        onclick="openMedicineEquivalents()" 
                        class="medicine-equivalents-btn px-4 py-2 text-sm font-medium text-medai-primary hover:bg-medai-bg rounded-lg transition-colors"
                    >
                        Medicine Equivalents
                    </button>
                    <!-- Profile Menu -->
                    <div class="profile-menu-container">
                        <button 
                            onclick="toggleProfileMenu()" 
                            class="profile-icon-btn"
                            aria-label="Profile menu"
                        >
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                            </svg>
                        </button>
                        <!-- Profile Dropdown Menu -->
                        <div id="profileDropdown" class="profile-dropdown is-hidden">
                            <button onclick="openYourProfile()" class="profile-dropdown-item">
                                Your Profile
                            </button>
                            <button onclick="openPatientHistory()" class="profile-dropdown-item">
                                Patient History
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-6">
        <div class="flex flex-col lg:flex-row gap-6">
            <!-- Left Panel - Common Problems (25% on desktop) -->
            <aside class="w-full lg:w-1/4">
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h2 class="text-xl font-semibold text-gray-800 mb-4">Common Problems</h2>
                    <div class="space-y-3">
                        <button onclick="sendProblemMessage('Cold & Cough')" class="problem-button w-full text-left px-4 py-3 bg-gray-50 hover:bg-medai-primary hover:text-white rounded-lg transition-colors duration-200 font-medium">
                            Cold & Cough
                        </button>
                        <button onclick="sendProblemMessage('Fever')" class="problem-button w-full text-left px-4 py-3 bg-gray-50 hover:bg-medai-primary hover:text-white rounded-lg transition-colors duration-200 font-medium">
                            Fever
                        </button>
                        <button onclick="sendProblemMessage('Headache')" class="problem-button w-full text-left px-4 py-3 bg-gray-50 hover:bg-medai-primary hover:text-white rounded-lg transition-colors duration-200 font-medium">
                            Headache
                        </button>
                        <button onclick="sendProblemMessage('Body Pain')" class="problem-button w-full text-left px-4 py-3 bg-gray-50 hover:bg-medai-primary hover:text-white rounded-lg transition-colors duration-200 font-medium">
                            Body Pain
                        </button>
                        <button onclick="sendProblemMessage('Stomach Pain')" class="problem-button w-full text-left px-4 py-3 bg-gray-50 hover:bg-medai-primary hover:text-white rounded-lg transition-colors duration-200 font-medium">
                            Stomach Pain
                        </button>
                        <button onclick="sendProblemMessage('Sore Throat')" class="problem-button w-full text-left px-4 py-3 bg-gray-50 hover:bg-medai-primary hover:text-white rounded-lg transition-colors duration-200 font-medium">
                            Sore Throat
                        </button>
                        <button onclick="sendProblemMessage('Fatigue')" class="problem-button w-full text-left px-4 py-3 bg-gray-50 hover:bg-medai-primary hover:text-white rounded-lg transition-colors duration-200 font-medium">
                            Fatigue
                        </button>
                        <button onclick="sendProblemMessage('Nausea')" class="problem-button w-full text-left px-4 py-3 bg-gray-50 hover:bg-medai-primary hover:text-white rounded-lg transition-colors duration-200 font-medium">
                            Nausea
                        </button>
                        <button onclick="sendProblemMessage('Allergy')" class="problem-button w-full text-left px-4 py-3 bg-gray-50 hover:bg-medai-primary hover:text-white rounded-lg transition-colors duration-200 font-medium">
                            Allergy
                        </button>
                        <button onclick="sendProblemMessage('Dizziness')" class="problem-button w-full text-left px-4 py-3 bg-gray-50 hover:bg-medai-primary hover:text-white rounded-lg transition-colors duration-200 font-medium">
                            Dizziness
                        </button>
                    </div>
                </div>
            </aside>

            <!-- Right Panel - Chatbot (75% on desktop) -->
            <section class="w-full lg:w-3/4">
                <div class="bg-white rounded-lg shadow-md flex flex-col" style="height: calc(100vh - 180px); min-height: 600px;">
                    <!-- Chat Area -->
                    <div id="chatArea" class="flex-1 p-6 overflow-y-auto chat-scroll">
                        <!-- Welcome Message -->
                        <div class="mb-6">
                            <div class="flex items-start gap-4">
                                <div class="w-8 h-8 bg-medai-primary rounded-full flex items-center justify-center flex-shrink-0 mt-1">
                                    <span class="text-white font-bold text-sm">M</span>
                                </div>
                                <div class="flex-1">
                                    <div class="bg-gray-100 rounded-lg p-4 inline-block max-w-2xl">
                                        <p class="text-gray-800 leading-relaxed">
                                            <strong>Hello, I'm MedAI.</strong> I'm here to help you understand symptoms and medicines safely.
                                        </p>
                                    </div>
                                    <!-- Quick CTA Chips -->
                                    <div class="mt-4 flex flex-wrap gap-2">
                                        <button onclick="sendQuickQuery('I have symptoms')" class="cta-chip px-4 py-2 bg-medai-primary text-white rounded-full text-sm hover:bg-opacity-90 transition-colors">
                                            I have symptoms
                                        </button>
                                        <button onclick="sendQuickQuery('About a medicine')" class="cta-chip px-4 py-2 bg-medai-primary text-white rounded-full text-sm hover:bg-opacity-90 transition-colors">
                                            About a medicine
                                        </button>
                                        <button onclick="sendQuickQuery('Is this safe for me?')" class="cta-chip px-4 py-2 bg-medai-primary text-white rounded-full text-sm hover:bg-opacity-90 transition-colors">
                                            Is this safe for me?
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Input Area -->
                    <div class="border-t border-gray-200 p-4">
                        <!-- Mode Toggle and Country Selector -->
                        <div class="mb-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0">
                            <div class="mode-toggle-container">
                                <button 
                                    id="simpleModeBtn" 
                                    onclick="switchMode('simple')" 
                                    class="mode-toggle-button active"
                                >
                                    Simple Mode
                                </button>
                                <button 
                                    id="advancedModeBtn" 
                                    onclick="switchMode('advanced')" 
                                    class="mode-toggle-button"
                                >
                                    Advanced Mode
                                </button>
                            </div>
                            <!-- Country Selector -->
                            <div class="country-selector-container">
                                <label for="countrySelect" class="country-label">Country</label>
                                <select 
                                    id="countrySelect" 
                                    class="country-select"
                                    onchange="updateCountryContext(this.value)"
                                >
                                    <option value="Global">Global</option>
                                    <option value="India">India</option>
                                    <option value="United States">United States</option>
                                    <option value="United Kingdom">United Kingdom</option>
                                    <option value="Canada">Canada</option>
                                    <option value="Australia">Australia</option>
                                </select>
                            </div>
                        </div>

                        <!-- Advanced Filters Section -->
                        <div id="advancedFilters" class="advanced-filters">
                            <div class="space-y-4 pb-2">
                                <!-- Medicine Brand Input -->
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">
                                        Medicine Brand (Optional)
                                    </label>
                                    <input 
                                        type="text" 
                                        id="medicineBrand" 
                                        placeholder="e.g., Tylenol, Advil, Claritin"
                                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-medai-primary focus:border-transparent text-sm"
                                    />
                                </div>

                                <!-- Drug Category Chips -->
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">
                                        Drug Category (Optional)
                                    </label>
                                    <div class="flex flex-wrap gap-2">
                                        <button onclick="toggleFilter('category', 'Pain Relief')" class="filter-chip" data-filter="category" data-value="Pain Relief">
                                            Pain Relief
                                        </button>
                                        <button onclick="toggleFilter('category', 'Antibiotic')" class="filter-chip" data-filter="category" data-value="Antibiotic">
                                            Antibiotic
                                        </button>
                                        <button onclick="toggleFilter('category', 'Allergy')" class="filter-chip" data-filter="category" data-value="Allergy">
                                            Allergy
                                        </button>
                                        <button onclick="toggleFilter('category', 'Antihistamine')" class="filter-chip" data-filter="category" data-value="Antihistamine">
                                            Antihistamine
                                        </button>
                                        <button onclick="toggleFilter('category', 'Antacid')" class="filter-chip" data-filter="category" data-value="Antacid">
                                            Antacid
                                        </button>
                                        <button onclick="toggleFilter('category', 'Cough & Cold')" class="filter-chip" data-filter="category" data-value="Cough & Cold">
                                            Cough & Cold
                                        </button>
                                    </div>
                                </div>

                                <!-- Context Chips -->
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">
                                        Context (Optional)
                                    </label>
                                    <div class="flex flex-wrap gap-2">
                                        <button onclick="toggleFilter('context', 'Adult')" class="filter-chip" data-filter="context" data-value="Adult">
                                            Adult
                                        </button>
                                        <button onclick="toggleFilter('context', 'Child')" class="filter-chip" data-filter="context" data-value="Child">
                                            Child
                                        </button>
                                        <button onclick="toggleFilter('context', 'Pregnancy')" class="filter-chip" data-filter="context" data-value="Pregnancy">
                                            Pregnancy
                                        </button>
                                        <button onclick="toggleFilter('context', 'Chronic Condition')" class="filter-chip" data-filter="context" data-value="Chronic Condition">
                                            Chronic Condition
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Message Input -->
                        <div class="flex gap-3 mt-4">
                            <input 
                                type="text" 
                                id="userInput" 
                                placeholder="Type your message here..." 
                                class="flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-medai-primary focus:border-transparent"
                                onkeypress="handleKeyPress(event)"
                            />
                            <button 
                                onclick="sendMessage()" 
                                class="send-button px-6 py-3 bg-medai-primary text-white rounded-lg hover:bg-opacity-90 transition-colors font-medium"
                            >
                                Send
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Medical Disclaimer -->
                <div class="mt-4 p-4 bg-yellow-50 border-l-4 border-yellow-400 rounded">
                    <p class="text-sm text-gray-700">
                        <strong>Medical Disclaimer:</strong> MedAI provides educational information only. It does not diagnose or prescribe. Consult a licensed medical professional.
                    </p>
                </div>
            </section>
        </div>
    </main>

    <!-- Medicine Equivalents Panel (Slide-in from right) -->
    <div id="equivalentsPanel" class="equivalents-panel is-hidden">
        <div class="equivalents-panel-overlay" onclick="closeMedicineEquivalents()"></div>
        <div class="equivalents-panel-content">
            <!-- Panel Header -->
            <div class="equivalents-panel-header">
                <h2 class="text-xl font-semibold text-gray-800">Medicine Equivalents Finder</h2>
                <button 
                    onclick="closeMedicineEquivalents()" 
                    class="equivalents-close-btn"
                    aria-label="Close panel"
                >
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- Panel Body -->
            <div class="equivalents-panel-body">
                <p class="text-sm text-gray-600 mb-6">
                    Educational reference tool for comparing medicines across countries by active ingredient or therapeutic purpose.
                </p>

                <!-- Two-Column Layout -->
                <div class="equivalents-layout">
                    <!-- Left Column -->
                    <div class="equivalents-column">
                        <div class="mb-4">
                            <label for="fromCountry" class="block text-sm font-medium text-gray-700 mb-2">
                                From Country
                            </label>
                            <select 
                                id="fromCountry" 
                                class="equivalents-select"
                            >
                                <option value="India">India</option>
                                <option value="United States">United States</option>
                                <option value="United Kingdom">United Kingdom</option>
                                <option value="Canada">Canada</option>
                                <option value="Australia">Australia</option>
                            </select>
                        </div>
                        <div>
                            <label for="medicineName" class="block text-sm font-medium text-gray-700 mb-2">
                                Medicine Name
                            </label>
                            <input 
                                type="text" 
                                id="medicineName" 
                                placeholder="e.g., Paracetamol, Ibuprofen"
                                class="equivalents-input"
                            />
                        </div>
                    </div>

                    <!-- Right Column -->
                    <div class="equivalents-column">
                        <div class="mb-4">
                            <label for="toCountry" class="block text-sm font-medium text-gray-700 mb-2">
                                To Country
                            </label>
                            <select 
                                id="toCountry" 
                                class="equivalents-select"
                            >
                                <option value="India">India</option>
                                <option value="United States" selected>United States</option>
                                <option value="United Kingdom">United Kingdom</option>
                                <option value="Canada">Canada</option>
                                <option value="Australia">Australia</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Educational Reference Result
                            </label>
                            <div id="equivalentsResult" class="equivalents-result">
                                <p class="text-gray-400 text-sm">Results will appear here after searching...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Action Button -->
                <div class="mt-6">
                    <button 
                        onclick="findMedicineEquivalent()" 
                        class="equivalents-find-btn w-full"
                    >
                        Find Equivalent
                    </button>
                </div>

                <!-- Educational Disclaimer -->
                <div class="mt-6 p-3 bg-blue-50 border-l-4 border-blue-400 rounded">
                    <p class="text-xs text-gray-700">
                        <strong>Educational Reference Only:</strong> This tool provides educational information about medicines. It does not suggest replacement, prescription, or treatment. Consult a licensed healthcare professional for medical advice.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Your Profile Panel -->
    <div id="yourProfilePanel" class="profile-panel is-hidden">
        <div class="profile-panel-overlay" onclick="closeYourProfile()"></div>
        <div class="profile-panel-content">
            <div class="profile-panel-header">
                <h2 class="text-xl font-semibold text-gray-800">Your Profile</h2>
                <button 
                    onclick="closeYourProfile()" 
                    class="profile-close-btn"
                    aria-label="Close panel"
                >
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <div class="profile-panel-body">
                <p class="text-sm text-gray-600 mb-6">
                    Manage your basic profile information. This information is used only during this session.
                </p>
                <div class="space-y-6">
                    <div>
                        <label for="userAge" class="block text-sm font-medium text-gray-700 mb-2">
                            Your age
                        </label>
                        <input 
                            type="number" 
                            id="userAge" 
                            placeholder="Enter your age"
                            min="1"
                            max="150"
                            class="profile-input"
                            onchange="updateProfileData()"
                            oninput="validateAgeInput(this)"
                        />
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            Sex
                        </label>
                        <div class="flex gap-4">
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input 
                                    type="radio" 
                                    name="userSex" 
                                    value="Male"
                                    class="profile-radio"
                                    onchange="updateProfileData()"
                                />
                                <span class="text-sm text-gray-700">Male</span>
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input 
                                    type="radio" 
                                    name="userSex" 
                                    value="Female"
                                    class="profile-radio"
                                    onchange="updateProfileData()"
                                />
                                <span class="text-sm text-gray-700">Female</span>
                            </label>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            Country
                        </label>
                        <div class="profile-readonly-field">
                            <span id="profileCountryDisplay">Global</span>
                            <span class="text-xs text-gray-500 ml-2">(Synced with country selector)</span>
                        </div>
                    </div>
                </div>
                <div class="mt-6 p-3 bg-gray-50 border-l-4 border-gray-400 rounded">
                    <p class="text-xs text-gray-700">
                        <strong>Session Only:</strong> This information is used only during this session and is not saved.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Patient History Panel -->
    <div id="patientHistoryPanel" class="profile-panel is-hidden">
        <div class="profile-panel-overlay" onclick="closePatientHistory()"></div>
        <div class="profile-panel-content">
            <div class="profile-panel-header">
                <h2 class="text-xl font-semibold text-gray-800">Patient History</h2>
                <button 
                    onclick="closePatientHistory()" 
                    class="profile-close-btn"
                    aria-label="Close panel"
                >
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <div class="profile-panel-body">
                <p class="text-sm text-gray-600 mb-6">
                    Optional medical context to improve safety guidance. This information is optional, stored only for this session, and used to improve safety guidance.
                </p>
                
                <div class="space-y-6">
                    <!-- Known Allergies -->
                    <div>
                        <label for="allergyInput" class="block text-sm font-medium text-gray-700 mb-2">
                            Known Allergies (Optional)
                        </label>
                        <div class="flex gap-2 mb-2">
                            <input 
                                type="text" 
                                id="allergyInput" 
                                placeholder="e.g., Penicillin, Peanuts"
                                class="profile-input flex-1"
                                onkeypress="handleAllergyKeyPress(event)"
                            />
                            <button 
                                onclick="addAllergy()" 
                                class="profile-add-btn"
                            >
                                Add
                            </button>
                        </div>
                        <div id="allergiesList" class="flex flex-wrap gap-2 mt-2">
                            <!-- Allergy chips will be added here -->
                        </div>
                    </div>

                    <!-- Chronic Conditions -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            Chronic Conditions (Optional)
                        </label>
                        <div class="flex flex-wrap gap-2">
                            <button 
                                onclick="toggleChronicCondition('Asthma')" 
                                class="profile-condition-chip"
                                data-condition="Asthma"
                            >
                                Asthma
                            </button>
                            <button 
                                onclick="toggleChronicCondition('Diabetes')" 
                                class="profile-condition-chip"
                                data-condition="Diabetes"
                            >
                                Diabetes
                            </button>
                            <button 
                                onclick="toggleChronicCondition('Heart Condition')" 
                                class="profile-condition-chip"
                                data-condition="Heart Condition"
                            >
                                Heart Condition
                            </button>
                            <button 
                                onclick="toggleChronicCondition('None')" 
                                class="profile-condition-chip"
                                data-condition="None"
                            >
                                None
                            </button>
                        </div>
                    </div>

                    <!-- Pregnancy Status -->
                    <div>
                        <label class="flex items-center gap-3">
                            <input 
                                type="checkbox" 
                                id="pregnancyStatus" 
                                class="profile-checkbox"
                                onchange="updatePatientHistory()"
                            />
                            <span class="text-sm font-medium text-gray-700">
                                Pregnancy Status (Optional)
                            </span>
                        </label>
                    </div>
                </div>

                <!-- Safety Note -->
                <div class="mt-6 p-3 bg-yellow-50 border-l-4 border-yellow-400 rounded">
                    <p class="text-xs text-gray-700">
                        <strong>Safety Note:</strong> This information is optional, stored only for this session, and used to improve safety guidance. It does not imply diagnosis, prescription, or guaranteed safety.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
